<!DOCTYPE html>
<html>
<head>
<title>Openspot</title> 
<meta charset="utf-8">
</head>
<body>

<!--get jquery from CDN-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!--insert jssha256.js script-->
<script src="jssha256.js"></script> 

<!--main script-->
<script>
// change the ip adress into the ip adress of your openspot.
var ip_adress = "192.168.2.20";
// change the password into your openspot password.
var password = "openspot";
var get_token;
var get_success;

$(document).ready(function(){
	$("button").click(function(){
	
		// get the token from openspot concatenate the token and the password, and hash it.
		$.getJSON("http://" + ip_adress + "/gettok.cgi", function(result) { 
			$.each(result, function(i, get_token){
				var token_password = get_token + password;	
				
				//hash token and password with jssha256.js.
				SHA256_init();
 				SHA256_write(token_password);
 				fin_digest = SHA256_finalize();  
				digest_hex = array_to_hex_string(fin_digest);
									
				var post_json = 
				$.ajax({
      					type: "POST",
      					dataType: "json",
      					url: "http://" + ip_adress + "/login.cgi", 
      					data: JSON.stringify({ token: get_token, digest: digest_hex }),
      					success: function(response) {
      						$.each(response, function(i, get_success){     				
      							$("#div_token").html("Token: " + get_token); 
      							$("#div_SHA256").html("SHA256: " + digest_hex);
      								if (i.indexOf('success') >= 0){
      									$("#div_Success").html("Success: " + get_success);
      								}
      								else
      								if (i.indexOf('hostname') >= 0){
      									$("#div_Hostname").html("Hostname: " + get_success);
      								}
      						});   		
					}
				});		        	        
			}); 
		});                           
	});
});
</script>

<button>Connect RF Shark</button>
<div id="div_token"></div>
<div id="div_SHA256"></div>
<div id="div_Success"></div>
<div id="div_Hostname"></div>
</body>
</html>
