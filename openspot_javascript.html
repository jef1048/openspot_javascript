<!DOCTYPE html>
<html>
<head>
<title>Openspot</title> 
</head>
<body>

<!--get jquery from CDN-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!--insert jssha256.js script-->
<script src="jssha256.js"></script> 

<!--main script-->
<script>

// change the ip adress into the ip adress of your openspot.
var ip_adress = "192.168.2.20";
// change the password into your openspot password.
var password = "your_password";
var get_token;

$(document).ready(function(){
	$("button").click(function(){
	
		// get the token from openspot concatenate the token and the password, and hash it.
		$.getJSON("http://" + ip_adress + "/gettok.cgi", function(result) { 
			$.each(result, function(i, get_token){
				var token_password = get_token + password;	
				
				//hash token and password with jssha256.js.
				SHA256_init();
 				SHA256_write(token_password);
 				fin_digest = SHA256_finalize();  
				digest_hex = array_to_hex_string(fin_digest);
									
            			$("div").html(token_password + " " + digest_hex);
  
				var post_json = 
    				$.ajax({
      				type: "POST",
      				dataType: "json",
      				url: "http://" + ip_adress + "/login.cgi", 
      				data: JSON.stringify({ token: get_token, digest: digest_hex }),
      				done: function(results) {
      				}
			        });	
		        	        
			}); 
		});                           
	});
});

</script>

<button>Connect RF Shark</button>
<div></div>

</body>
</html>
